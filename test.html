<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta data-hid="apple-mobile-web-app-capable" name="apple-mobile-web-app-capable" content="yes" />
  <meta data-hid="apple-mobile-web-app-status-bar-style" name="apple-mobile-web-app-status-bar-style" content="black" />
  <title>test</title>
</head>

<body>
  <div></div>
  <script>
    function getAppVersion(appName, withappstr, userAgent) {
        // console.log(getAppVersion("Chrome"));
        // const userAgent = navigator.userAgent;
        userAgent = userAgent || navigator.appVersion
        var reg = eval("/" + appName + "\\/([\\d\\.]+)/");
        var isApp = userAgent.includes(appName);
        var ver = userAgent.match(reg, "i");
        // console.log(userAgent)
        // console.log(ver)
        // withappstr = typeof(withappstr) != "undefined" ? withappstr : false;
        if (ver) {
          if (withappstr) {
            //需要带上app名称，完整输出
            return ver ? ver[0] : "";
          } else {
            return ver ? ver[1] : "";
          }
        } else {
          if (isApp) {
            //是指定客户端但是版本号未知
            console.log(appName + "\u672A\u77E5\u7248\u672C\u53F7");
            return false;
          } else {
            //不是指定客户端
            console.log(appName + "\u4E0D\u5B58\u5728");
            return null;
          }
        }
      }
    function getOsVersion(osName, withosstr, userAgent) {debugger
      userAgent = userAgent || navigator.appVersion
      var d = [ 'iPhone', 'iPad', 'iPod' ], name = osName, index = d.indexOf(osName)
      if (index > -1) {
        name = 'OS'
      }
      var reg = eval("/" + name + "\\s[\\d\\_]+/");
      var isApp = userAgent.includes(name);
      var ver = (userAgent.match(reg, "ig") + '').replace(/\s/ig, '/').replace(/_/ig, '.');
      if (index > -1) {
        ver = ver.replace(/OS\//ig, osName + '/')
      }
      // console.log(userAgent, reg)
      // console.log(ver)
      return getAppVersion(osName, withosstr, ver)
    }
    console.log(getOsVersion('iPhone', false))
  </script>
</body>

</html>